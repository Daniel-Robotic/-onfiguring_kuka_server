<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-09-30T21:21:54.8714395"><title>Настройка подключения к Ubuntu серверу по SSH в Windows | Документация для работы с KUKA iiwa и мультикамерной системой</title><script type="application/json" id="virtual-toc-data">[{"id":"windows","level":0,"title":"Подключение с использованием командной строки Windows","anchor":"#windows"},{"id":"putty","level":0,"title":"Подключение с использованием Putty","anchor":"#putty"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/robot-logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Настройка подключения к Ubuntu серверу по SSH в Windows | Документация для работы с KUKA iiwa и мультикамерной системой"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Документация для работы с KUKA iiwa и мультикамерной системой Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/настройка-подключения-к-ubuntu-серверу-по-ssh-в-windows.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Настройка подключения к Ubuntu серверу по SSH в Windows | Документация для работы с KUKA iiwa и мультикамерной системой"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/настройка-подключения-к-ubuntu-серверу-по-ssh-в-windows.html#webpage",
    "url": "writerside-documentation/настройка-подключения-к-ubuntu-серверу-по-ssh-в-windows.html",
    "name": "Настройка подключения к Ubuntu серверу по SSH в Windows | Документация для работы с KUKA iiwa и мультикамерной системой",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Документация для работы с KUKA iiwa и мультикамерной системой Help"
}</script><!-- End Schema.org --></head><body data-id="Настройка-подключения-к-Ubuntu-серверу-по-SSH-в-Windows" data-main-title="Настройка подключения к Ubuntu серверу по SSH в Windows" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="starter.md|Установка необходимых модулей///Настройка-Ubuntu-сервера.md|Настройка Ubuntu сервера"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Документация для работы с KUKA iiwa и мультикамерной системой  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Настройка-подключения-к-Ubuntu-серверу-по-SSH-в-Windows" id="Настройка-подключения-к-Ubuntu-серверу-по-SSH-в-Windows.md">Настройка подключения к Ubuntu серверу по SSH в Windows</h1><p id="-e0hlfp_3">Подключение по ssh к Ubuntu серверу в Windows возможно двумя способами:</p><ul class="list _bullet" id="-e0hlfp_4"><li class="list__item" id="-e0hlfp_9"><p>Использование встроенной командной строки</p></li><li class="list__item" id="-e0hlfp_10"><p>Использование сторонних приложений (например Putty)</p></li></ul><aside class="prompt" data-type="warning" data-title="" id="-e0hlfp_5"><p id="-e0hlfp_11">Подключение с использованием встроенной командной строки Windows возможно только с версии Windows 10 и выше</p></aside><aside class="prompt" data-type="note" data-title="" id="-e0hlfp_6"><p id="-e0hlfp_12">Использование Putty позволяет отображать графические приложения прямо из консоли</p></aside><section class="chapter"><h2 id="windows" data-toc="windows">Подключение с использованием командной строки Windows</h2><p id="-e0hlfp_13">Для подключения к серверу Ubuntu необходимо ввести следующую команду:</p><div class="code-block" data-lang="bash">
ssh user@ip -p 22
</div><p id="-e0hlfp_15">где <code class="code" id="-e0hlfp_40">user</code> имя пользователя сервера, <code class="code" id="-e0hlfp_41">ip</code> адрес хоста, <code class="code" id="-e0hlfp_42">-p 22</code> порт на котором находиться хост.</p><aside class="prompt" data-type="note" data-title="" id="-e0hlfp_16"><p id="-e0hlfp_43">По умолчанию используется <span class="control" id="-e0hlfp_44">22</span> порт, по этому ключ со значением <code class="code" id="-e0hlfp_45">-p 22</code> можно не использовать если Ваш порт не менялся.</p></aside><p id="-e0hlfp_17">При первом подключении система спросит у Вас, производить сохранение ключа доступа. Отвечаем <code class="code" id="-e0hlfp_46">yes</code>.</p><div class="code-block" data-lang="none">
The authenticity of host '192.168.21.1 (192.168.21.1)' can't be established.
ECDSA key fingerprint is SHA256:aD+XaI1+N7WhZU82Qlqznd3onFU2VqiNgLrJLe6ikSY.
Are you sure you want to continue connecting (yes/no/[fingerprint])?
</div><p id="-e0hlfp_19">После система потребуют пароль пользователя, который необходимо ввести.</p><aside class="prompt" data-type="tip" data-title="" id="-e0hlfp_20"><p id="-e0hlfp_47">В SSH существует несколько способов авторизации. Вы можете каждый раз вводить пароль пользователя или использовать более безопасный и надежный способ - ключи SSH. Что самое интересное, он более удобен для применения, вам даже не нужно будет вводить пароль.</p></aside><p id="-e0hlfp_21">Сначала необходимо создать ключи ssh для аутентификации на локальном сервере. Для этого существует специальная утилита ssh-keygen, которая входит в набор утилит OpenSSH. По умолчанию она создает пару 2048 битных RSA ключей, которая подойдет не только для SSH, но и для большинства других ситуаций.</p><p id="-e0hlfp_22">Итак, генерация ключей ssh выполняется командой (в Windows):</p><div class="code-block" data-lang="bash">
ssh-keygen
</div><p id="-e0hlfp_24">Утилита предложит вам выбрать расположение ключей. По умолчанию ключи располагаются в папке <span class="emphasis" id="-e0hlfp_48">С:/users/user/.ssh/</span> Лучше ничего не менять, чтобы все работало по умолчанию и ключи автоматически подхватывались. Секретный ключ будет называться <span class="control" id="-e0hlfp_49">id_rsa</span>, а публичный <span class="control" id="-e0hlfp_50">id_rsa.pub</span>.</p><p id="-e0hlfp_25">Затем утилита предложит ввести пароль для дополнительного шифрования ключа на диске. Его можно не указывать, если не хотите. Использование дополнительного шифрования имеет только один минус - необходимость вводить пароль, и несколько преимуществ:</p><ul class="list _bullet" id="-e0hlfp_26"><li class="list__item" id="-e0hlfp_51"><p>Пароль никогда не попадет в сеть, он используется только на локальной машине для расшифровки ключа. Это значит что перебор по паролю больше невозможен.</p></li><li class="list__item" id="-e0hlfp_52"><p>Секретный ключ хранится в закрытом каталоге и у клиента ssh нет к нему доступа пока вы не введете пароль.</p></li><li class="list__item" id="-e0hlfp_53"><p>Если злоумышленник хочет взломать аутентификацию по ключу SSH, ему понадобится доступ к вашей системе. И даже тогда ключевая фраза может стать серьезной помехой на его пути.</p></li></ul><p id="-e0hlfp_27">Но все же, это необязательное дополнение и если не хотите, то вы можете просто нажать Enter. Тогда доступ по ключу ssh будет выполняться автоматически и вам не нужно будет что-либо вводить.</p><p id="-e0hlfp_28">Теперь у вас есть открытый и закрытый ключи SSH и вы можете использовать их для проверки подлинности. Дальше нам осталось разместить открытый ключ на удаленном сервере.</p><p id="-e0hlfp_29">Когда генерация ключей завершена, нам осталось только загрузить ключ на сервер. Для загрузки ключа можно использовать несколько способов. В некоторых случаях вы можете указать ключ в панели управления сервером, например, сPanel или любой другой. Но мы такой способ рассматривать не будем. Мы рассмотрим ручные способы.</p><p id="-e0hlfp_30">Самый простой способ скопировать ключ на удаленный сервер - это использовать утилиту ssh-copy-id. Она тоже входит в пакет программ OpenSSH. Но для работы этого метода вам нужно иметь пароль доступа к серверу по SSH. Синтаксис команды:</p><div class="code-block" data-lang="bash">
ssh-copy-id user@ip
</div><p id="-e0hlfp_32">При первом подключении к серверу система может его не распознать, поэтому вам нужно ввести <code class="code" id="-e0hlfp_54">yes</code>. Затем введите ваш пароль пользователя на удаленном сервере. Утилита подключится к удаленному серверу, а затем использует содержимое ключа <span class="control" id="-e0hlfp_55">id.rsa.pub</span> для загрузки его на сервер в файл <span class="emphasis" id="-e0hlfp_56">~/.ssh/authorized_keys</span>. Дальше вы можете выполнять аутентификацию с помощью этого ключа.</p><p id="-e0hlfp_33">Если описанный выше способ не работает, переходим в папку <span class="emphasis" id="-e0hlfp_57">C:\Users\user\.ssh</span> открываем файл <span class="control" id="-e0hlfp_58">id.rsa.pub</span> и копируем все содержимое. Для выполнения в терминале всех действий воспользуемся следующими командами:</p><div class="code-block" data-lang="bash">
cd C:\Users\user\.ssh
more .\id_rsa.pub

# Output
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAL...
</div><p id="-e0hlfp_35">Копируем ключ. Далее переходим на наш удаленный сервер, где создаем папку <code class="code" id="-e0hlfp_59">.ssh</code> и файл <code class="code" id="-e0hlfp_60">authorized_keys</code>, для этого выполним команды (Ubuntu):</p><div class="code-block" data-lang="bash">
mkdir ~/.ssh/
cd ~/.ssh/
touch authorized_keys

echo ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAL... &gt;&gt; authorized_keys
</div><p id="-e0hlfp_37">Для проверки, что наш ключ вставился в файл, проведем проверку командой:</p><div class="code-block" data-lang="bash">
cat authorized_keys

# Output
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAL...
</div><p id="-e0hlfp_39">Мы должны увидеть выведенный наш ключ. Если ключ выводиться, закрываем соединение и подключаемся заново. Пароль больше не требуется.</p></section><section class="chapter"><h2 id="putty" data-toc="putty">Подключение с использованием Putty</h2><p id="-e0hlfp_61">Основным недостатком использования встроенной командной строки Windows может служить невозможность запуска GUI приложений. Для решения данной проблемы имеется возможность использования сторонних программных продуктов, т.к. <a href="https://www.putty.org/" id="-e0hlfp_64" data-external="true" rel="noopener noreferrer">putty</a>. Также нам понадобиться <a href="https://sourceforge.net/projects/vcxsrv/" id="-e0hlfp_65" data-external="true" rel="noopener noreferrer">X11 сервер</a>, который позволит запускать графические приложения используя ssh подключение.</p><section class="chapter"><h3 id="-e0hlfp_62" data-toc="-e0hlfp_62">Конфигурирование</h3><p id="-e0hlfp_66">После установки putty, в папке установки или в Пуск меню, найдите приложение <span class="control" id="-e0hlfp_75">puttygen.exe</span> и запустите его.</p><ul class="list _bullet" id="-e0hlfp_67"><li class="list__item" id="-e0hlfp_76"><p><span class="control" id="-e0hlfp_84">Тип ключа для генерации</span> выберите SSH-2 RSA. Длина генерируемого ключа(в битах): введите <span class="control" id="-e0hlfp_85">4096</span>.</p></li><li class="list__item" id="-e0hlfp_77"><p>Нажмите кнопку <span class="control" id="-e0hlfp_86">Генерировать</span>.</p></li><li class="list__item" id="-e0hlfp_78"><p>Хаотично перемещайте курсор мыши внутри окна программы.</p></li><li class="list__item" id="-e0hlfp_79"><p>Введите желаемый комментарий к созданным ключам, чтобы Вам было удобнее различать созданные ключевые пары в будущем.</p></li><li class="list__item" id="-e0hlfp_80"><p>Если Вы желаете (не обязательно), введите пароль для закрытого ключа.</p></li><li class="list__item" id="-e0hlfp_81"><p>Сохраните открытый и личный (закрытый) ключ, не перепутайте ключи в будущем.</p></li><li class="list__item" id="-e0hlfp_82"><p>Не закрываем окно программы генерации ключей PuTTY.</p></li><li class="list__item" id="-e0hlfp_83"><p>Подключаемся по ssh к нашему Ubuntu серверу и вводим следующие команды:</p></li></ul><div class="code-block" data-lang="bash">
cd ~/.ssh/
echo ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAL... &gt;&gt; authorized_keys
</div><aside class="prompt" data-type="warning" data-title="" id="-e0hlfp_69"><p id="-e0hlfp_87">Здесь используется ваш сгенерированный ключ в <span class="control" id="-e0hlfp_88">puttygen.exe</span></p></aside><p id="-e0hlfp_70">В приложении <span class="control" id="-e0hlfp_89">putty.exe</span>, вводим данные системы:</p><figure id="-e0hlfp_71"><img alt="putty_main.png" src="images/putty_main.png" title="putty_main.png" width="449" height="440"></figure><p id="-e0hlfp_72">Далее переходим в <span class="control" id="-e0hlfp_90">Connection -&gt; SSH -&gt; Auth -&gt; Credentials</span> и в поле <span class="control" id="-e0hlfp_91">Private key file for authentication:</span> выбираем файл с нашим приватным ключом</p><figure id="-e0hlfp_73"><img alt="putty_shh_credentials.png" src="images/putty_shh_credentinals.png" title="putty_shh_credentials.png" width="447" height="441"></figure><p id="-e0hlfp_74">Далее подключаемся к серверу. При первом подключении putty спросит о сохранении данных о сервере, нажимаем кнопку <span class="control" id="-e0hlfp_92">Accept</span>.</p></section><section class="chapter"><h3 id="gui" data-toc="gui">Вывод GUI приложений</h3><p id="-e0hlfp_93">Для вывода GUI приложений, производим установку <a href="https://sourceforge.net/projects/vcxsrv/" id="-e0hlfp_105" data-external="true" rel="noopener noreferrer">X11 сервера</a>. После чего производим запуск <span class="control" id="-e0hlfp_106">X11 Launcher</span></p><figure id="-e0hlfp_94"><img alt="X11_main.png" src="images/X11_main.png" title="X11_main.png" width="493" height="394"></figure><p id="-e0hlfp_95">В основном окне оставляем параметры по умолчанию.</p><figure id="-e0hlfp_96"><img alt="x11_select_client.png" src="images/x11_select_client.png" title="x11_select_client.png" width="492" height="390"></figure><p id="-e0hlfp_97">Здесь также оставляем параметры по умолчанию.</p><p id="-e0hlfp_98">В следующем окне убираем галочку с <span class="control" id="-e0hlfp_107">Primary Selection</span></p><figure id="-e0hlfp_99"><img alt="x11_primary.png" src="images/x11_primary.png" title="x11_primary.png" width="496" height="387"></figure><p id="-e0hlfp_100">В последнем окне нажимаем клавишу <span class="control" id="-e0hlfp_108">готово</span>, наш <span class="control" id="-e0hlfp_109">X11 сервер</span>, свернется в трей.</p><p id="-e0hlfp_101">В Putty переходим по пути <span class="control" id="-e0hlfp_110">Connection -&gt; SSH -&gt; X11</span>, в нем ставим активный чек-бокс <span class="control" id="-e0hlfp_111">Enable X11 forwarding</span> и подключаемся к нашему Ubuntu серверу. Производим установку <code class="code" id="-e0hlfp_112">ssh</code> и перезагружаем сервис <code class="code" id="-e0hlfp_113">sshd</code>:</p><div class="code-block" data-lang="bash">
sudo apt install ssh
service sshd restart
</div><p id="-e0hlfp_103">Для проверки работы <span class="control" id="-e0hlfp_114">X11 сервера</span> введем команду <code class="code" id="-e0hlfp_115">gedit</code>, должно появиться блокнот:</p><figure id="-e0hlfp_104"><img alt="gedit.png" src="images/gedit.png" title="gedit.png" width="907" height="752"></figure></section></section><div class="last-modified">Last modified: 30 сентября 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="openssh.html" class="navigation-links__prev">Установка OpenSHH</a><a href="отключение-ввода-пароля-sudo.html" class="navigation-links__next">Отключение ввода пароля sudo</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>